# wiiiv v2.0 Engineering Whitepaper

**LLM Governor 기반 의사결정 인프라**

**Version:** 2.0
**Date:** 2026-02-01
**Author:** SKYTREE / 하늘나무

---

## Executive Summary

wiiiv v2.0은 **LLM을 사용하지만, LLM에 지배되지 않는 결정 무결성 중심의 운영 인프라**입니다.

이 시스템은 다음 핵심 질문에 대한 답을 구조적으로 보장합니다:

- LLM이 잘못된 판단을 내리면 어떻게 되는가?
- LLM이 완전히 동작하지 않으면 어떻게 되는가?
- 누군가 시스템을 속이려 하면 어떻게 되는가?
- 사고가 발생하면 누가 책임지는가?

**wiiiv의 답:** 이 모든 경우에서 시스템은 **안전하게 실패(Fail-Closed)**하며, 모든 판단 과정은 **추적 가능하고 재현 가능**합니다.

---

## 1. 설계 철학

### 1.1 핵심 원칙

```
┌─────────────────────────────────────────────────────────────────┐
│                                                                 │
│   "문서가 코드보다 상위다"                                      │
│   "코드는 문서(계약)를 구현할 뿐이다"                           │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

wiiiv는 다음 원칙을 절대 규칙으로 따릅니다:

| 원칙 | 설명 |
|------|------|
| **FAIL-CLOSED** | 장애 시 자동 승인 금지, 보류/거부로 처리 |
| **LLM 비의존성** | LLM 없이도 정책 기반 최소 안전 결론 가능 |
| **책임 귀속 명확화** | AI는 법적 책임 주체 불가, 조직이 최종 책임 |
| **감사 가능성** | 모든 판단 과정이 외부 감사에서 검증 가능 |
| **무결성 보장** | 해시 체인으로 사후 조작 탐지 |

### 1.2 wiiiv가 아닌 것

```
┌─────────────────────────────────────────────────────────────────┐
│  ❌ AI 도구                                                     │
│  ❌ 워크플로우 자동화                                           │
│  ❌ LLM 오케스트레이터                                          │
│  ❌ 챗봇 프레임워크                                             │
├─────────────────────────────────────────────────────────────────┤
│  ✅ wiiiv의 정확한 정의:                                        │
│                                                                 │
│  "LLM을 사용하지만, LLM에 지배되지 않는                         │
│   결정 무결성 중심의 운영 인프라"                               │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 2. 아키텍처

### 2.1 계층 구조

```
┌─────────────────────────────────────────────────────────────────┐
│                         Spec (판단 자산)                        │
│                              │                                  │
│                              ▼                                  │
│                      Governor (판단 주체)                       │
│                              │                                  │
│                              ▼                                  │
│                       DACS (합의 엔진)                          │
│              ┌───────────────┼───────────────┐                  │
│              ▼               ▼               ▼                  │
│         Architect       Reviewer        Adversary               │
│         (구조)          (요구사항)       (위험)                 │
│              └───────────────┼───────────────┘                  │
│                              ▼                                  │
│                  VetoConsensusEngine                            │
│                  (1 REJECT = NO)                                │
│                              │                                  │
│                              ▼                                  │
│                    Blueprint (판단의 고정)                      │
│                              │                                  │
│                              ▼                                  │
│                        Gate (통제)                              │
│              ┌───────┬───────┼───────┬───────┐                  │
│              ▼       ▼       ▼       ▼       ▼                  │
│           DACS   UserApproval Permission  Cost  ...             │
│                              │                                  │
│                              ▼                                  │
│                      Executor (실행)                            │
│                              │                                  │
│                              ▼                                  │
│                       Runner (오케스트레이션)                   │
│                              │                                  │
│                              ▼                                  │
│                    RetryPolicy (재시도 규칙)                    │
└─────────────────────────────────────────────────────────────────┘
```

### 2.2 책임 경계 (절대 규칙)

| 계층 | 책임 | 금지 |
|------|------|------|
| **Governor** | 판단, 흐름 결정 | 직접 실행 |
| **DACS** | 합의 결과 반환 | 흐름 제어, 판단 |
| **Gate** | 정책 강제 (ALLOW/DENY) | 판단, 해석 |
| **Executor** | 실행만 | 판단, 해석, 흐름 제어 |
| **Runner** | 집계, 오케스트레이션 | 해석, 의미 판단 |

### 2.3 DACS (Dynamic Agent Consensus System)

```
┌─────────────────────────────────────────────────────────────────┐
│                          DACS 구조                              │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│    ┌──────────────┐  ┌──────────────┐  ┌──────────────┐        │
│    │  Architect   │  │   Reviewer   │  │  Adversary   │        │
│    │              │  │              │  │              │        │
│    │  구조적      │  │  요구사항    │  │  위험/보안   │        │
│    │  타당성      │  │  충족 여부   │  │  악용 가능성 │        │
│    │              │  │              │  │              │        │
│    │  APPROVE     │  │  APPROVE     │  │  REJECT      │        │
│    │  REJECT      │  │  REJECT      │  │  APPROVE     │        │
│    │  ABSTAIN     │  │  ABSTAIN     │  │  ABSTAIN     │        │
│    └──────┬───────┘  └──────┬───────┘  └──────┬───────┘        │
│           │                 │                 │                 │
│           └─────────────────┼─────────────────┘                 │
│                             ▼                                   │
│              ┌──────────────────────────────┐                   │
│              │    VetoConsensusEngine       │                   │
│              │                              │                   │
│              │  • REJECT 1개 → NO           │                   │
│              │  • ABSTAIN 1개 → REVISION    │                   │
│              │  • APPROVE 전원 → YES        │                   │
│              └──────────────────────────────┘                   │
│                             │                                   │
│                             ▼                                   │
│                    ┌────────────────┐                           │
│                    │ YES / NO /     │                           │
│                    │ REVISION       │                           │
│                    └────────────────┘                           │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

**핵심:** Adversary의 REJECT 1개로 전체 결정이 NO가 됩니다 (거부권).

---

## 3. FAIL-CLOSED 설계

### 3.1 왜 FAIL-CLOSED인가?

대부분의 시스템은 **FAIL-OPEN**입니다:

```
┌─────────────────────────────────────────────────────────────────┐
│                       FAIL-OPEN (위험)                          │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│    요청 ──▶ LLM 평가 ──▶ [장애 발생] ──▶ 기본값: 승인          │
│                                                                 │
│    "어쨌든 통과시켜야 업무가 돌아가니까"                        │
│                                                                 │
│    결과:                                                        │
│    • 위험한 요청이 장애 틈에 통과                               │
│    • 사고 발생 시 "시스템이 그랬다" 변명                        │
│    • 감사/규제 환경에서 방어 불가                               │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

wiiiv는 **FAIL-CLOSED**입니다:

```
┌─────────────────────────────────────────────────────────────────┐
│                      FAIL-CLOSED (안전)                         │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│    요청 ──▶ LLM 평가 ──▶ [장애 발생] ──▶ 기본값: 보류/거부     │
│                                                                 │
│    "확실하지 않으면 승인하지 않는다"                            │
│                                                                 │
│    결과:                                                        │
│    • 위험한 요청은 장애 시에도 차단                             │
│    • 사람이 개입하여 명시적 승인 필요                           │
│    • 감사 로그에 장애 상황 기록                                 │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 3.2 FAIL-CLOSED 구현 메커니즘

```
┌─────────────────────────────────────────────────────────────────┐
│                    장애 유형별 처리                             │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────┐                                                │
│  │ LLM 429     │──▶ 재시도 (최대 N회) ──▶ 실패 시 REVISION     │
│  │ Rate Limit  │    + Exponential Backoff                       │
│  └─────────────┘                                                │
│                                                                 │
│  ┌─────────────┐                                                │
│  │ LLM 5xx     │──▶ Degraded Mode 진입 ──▶ 정책 기반 판단      │
│  │ Server Error│    (LLM 없이 동작)                             │
│  └─────────────┘                                                │
│                                                                 │
│  ┌─────────────┐                                                │
│  │ Timeout     │──▶ Circuit Breaker ──▶ Human Escalation       │
│  │             │                                                │
│  └─────────────┘                                                │
│                                                                 │
│  ┌─────────────┐                                                │
│  │ 부분 실패   │──▶ 누락 페르소나 기록 ──▶ 강제 REVISION       │
│  │ (1/3 실패) │                                                │
│  └─────────────┘                                                │
│                                                                 │
│  ┌─────────────┐                                                │
│  │ 예산 초과   │──▶ 즉시 중단 ──▶ 요약 생성 ──▶ 사람 개입     │
│  │             │                                                │
│  └─────────────┘                                                │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 3.3 Degraded Mode (저하 모드)

LLM이 완전히 사용 불가능할 때도 시스템은 동작해야 합니다:

```
┌─────────────────────────────────────────────────────────────────┐
│                      Degraded Mode                              │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  사용 가능한 기능:                                              │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │ ✅ 정책 기반 결정 (Policy-Based Decision)                 │  │
│  │ ✅ 단순 위험 평가 (Simple Risk Assessment)                │  │
│  │ ✅ 안전 기본값 거부 (Safe Default Rejection)              │  │
│  │ ✅ 감사 로깅 (Audit Logging)                              │  │
│  │ ✅ 사람 에스컬레이션 (Human Escalation)                   │  │
│  └──────────────────────────────────────────────────────────┘  │
│                                                                 │
│  사용 불가능한 기능:                                            │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │ ❌ LLM 기반 페르소나 평가                                 │  │
│  │ ❌ 복잡한 맥락 분석                                       │  │
│  │ ❌ 자연어 추론                                            │  │
│  └──────────────────────────────────────────────────────────┘  │
│                                                                 │
│  예시: 타이어 마모도 85% + 우천 + 고속도로                      │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │ 정책 규칙:                                                │  │
│  │ • tire_wear > 80% → 위험                                  │  │
│  │ • rain + tire_wear > 70% → 위험                           │  │
│  │ • highway + tire_wear > 75% → 위험                        │  │
│  │                                                           │  │
│  │ 결과: NO (정책 기반 자동 거부)                            │  │
│  │ 권고: 타이어 교체, 저속 주행, 고속도로 금지               │  │
│  └──────────────────────────────────────────────────────────┘  │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 4. 적대적 공격 저항

### 4.1 공격 벡터 분류

```
┌─────────────────────────────────────────────────────────────────┐
│                      공격 벡터 분류                             │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ 1. 의도 은폐 (Intent Concealment)                        │   │
│  │                                                          │   │
│  │    "이건 연구 목적입니다"                                │   │
│  │    "실제 적용 안 할 거예요"                              │   │
│  │    "법적으로 문제없어요"                                 │   │
│  │                                                          │   │
│  │    ──▶ 방어: Intent Drift Detection                      │   │
│  │        표면 의도 ≠ 실제 영향 분리 분석                   │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ 2. 권한 남용 (Authority Abuse)                           │   │
│  │                                                          │   │
│  │    "나는 관리자야"                                       │   │
│  │    "책임 내가 질게"                                      │   │
│  │    "CEO가 지시했어"                                      │   │
│  │                                                          │   │
│  │    ──▶ 방어: Authority Neutralizer                       │   │
│  │        role ≠ privilege over safety                      │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ 3. 단계적 누적 (Progressive Risk)                        │   │
│  │                                                          │   │
│  │    1단계: "사용자 분류해줘" (무해)                        │   │
│  │    2단계: "취약 패턴 분석해줘" (애매)                     │   │
│  │    3단계: "그 그룹 타겟팅해줘" (위험)                     │   │
│  │                                                          │   │
│  │    ──▶ 방어: Context Accumulator + Hard Stop             │   │
│  │        누적 위험 점수 계산, 임계값 도달 시 차단          │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ 4. 책임 전가 (Responsibility Diffusion)                  │   │
│  │                                                          │   │
│  │    "이건 네가 판단한 거지?"                              │   │
│  │    "자동화 시스템이니까 내 책임 아니야"                  │   │
│  │                                                          │   │
│  │    ──▶ 방어: Responsibility Lock                         │   │
│  │        AI ≠ 법적 책임 주체, 조직 책임 고정               │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 4.2 방어 메커니즘 흐름

```
┌─────────────────────────────────────────────────────────────────┐
│                      요청 처리 흐름                             │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   요청 입력                                                     │
│       │                                                         │
│       ▼                                                         │
│   ┌───────────────────────────────────────┐                    │
│   │ Intent Drift Detection                 │                    │
│   │ • 표면 의도 분석                       │                    │
│   │ • 실제 영향 추론                       │                    │
│   │ • Drift 감지 시 Red Flag               │                    │
│   └───────────────────┬───────────────────┘                    │
│                       │                                         │
│                       ▼                                         │
│   ┌───────────────────────────────────────┐                    │
│   │ Authority Neutralizer                  │                    │
│   │ • 권한 주장 분석                       │                    │
│   │ • 권한 ≠ 안전 면제 적용                │                    │
│   │ • 책임 수용 선언 무력화                │                    │
│   └───────────────────┬───────────────────┘                    │
│                       │                                         │
│                       ▼                                         │
│   ┌───────────────────────────────────────┐                    │
│   │ Context Accumulator                    │                    │
│   │ • 세션 내 요청 기록                    │                    │
│   │ • 누적 위험 점수 계산                  │                    │
│   │ • 임계값 초과 시 Hard Stop             │                    │
│   └───────────────────┬───────────────────┘                    │
│                       │                                         │
│                       ▼                                         │
│   ┌───────────────────────────────────────┐                    │
│   │ DACS Evaluation                        │                    │
│   │ • Architect / Reviewer / Adversary     │                    │
│   │ • VetoConsensusEngine                  │                    │
│   │ • 1 REJECT = NO                        │                    │
│   └───────────────────┬───────────────────┘                    │
│                       │                                         │
│                       ▼                                         │
│   ┌───────────────────────────────────────┐                    │
│   │ Responsibility Lock                    │                    │
│   │ • 책임 귀속 명확화                     │                    │
│   │ • AI 비책임 주체 확인                  │                    │
│   │ • 조직 최종 책임 고정                  │                    │
│   └───────────────────┬───────────────────┘                    │
│                       │                                         │
│                       ▼                                         │
│                  최종 결정                                      │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 5. 감사 가능성 (Auditability)

### 5.1 Audit View 구조

외부 감사인에게 제공되는 정보 계층:

```
┌─────────────────────────────────────────────────────────────────┐
│                        Audit View                               │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  1. Original Request (원문)                                     │
│     ├── requestId                                               │
│     ├── timestamp                                               │
│     ├── requester                                               │
│     └── content                                                 │
│                                                                 │
│  2. Parsed Intent (의도 해석)                                   │
│     ├── primaryIntent                                           │
│     ├── secondaryIntents                                        │
│     ├── targetData                                              │
│     └── purpose                                                 │
│                                                                 │
│  3. Identified Risks (위험 식별)                                │
│     ├── riskId                                                  │
│     ├── category (Privacy, Compliance, Ethics)                  │
│     ├── severity (LOW, MEDIUM, HIGH, CRITICAL)                  │
│     └── mitigationPossible                                      │
│                                                                 │
│  4. Persona Evaluations (DACS 평가)                             │
│     ├── Architect: vote, reasoning, keyFactors                  │
│     ├── Reviewer: vote, reasoning, keyFactors                   │
│     └── Adversary: vote, reasoning, keyFactors                  │
│                                                                 │
│  5. Consensus Application (합의 적용)                           │
│     ├── rule: VetoConsensusEngine                               │
│     ├── input: {Architect: X, Reviewer: Y, Adversary: Z}        │
│     ├── output: YES / NO / REVISION                             │
│     └── explanation                                             │
│                                                                 │
│  6. Final Decision + Alternatives                               │
│     ├── decision                                                │
│     ├── summary                                                 │
│     └── alternatives offered                                    │
│                                                                 │
│  7. Metadata (재현 가능성)                                      │
│     ├── policyVersion                                           │
│     ├── personaSetVersion                                       │
│     ├── consensusRule                                           │
│     ├── systemVersion                                           │
│     └── auditLogHash                                            │
│                                                                 │
│  ⛔ 노출하지 않는 정보:                                         │
│     • Raw LLM Prompts                                           │
│     • Internal Model Parameters                                 │
│     • Proprietary Algorithm Details                             │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 5.2 무결성 해시 체인

```
┌─────────────────────────────────────────────────────────────────┐
│                    Integrity Hash Chain                         │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  Decision 1          Decision 2          Decision 3             │
│  ┌─────────┐        ┌─────────┐        ┌─────────┐             │
│  │ Payload │        │ Payload │        │ Payload │             │
│  │  Hash   │        │  Hash   │        │  Hash   │             │
│  │  [H1]   │        │  [H2]   │        │  [H3]   │             │
│  └────┬────┘        └────┬────┘        └────┬────┘             │
│       │                  │                  │                   │
│       ▼                  ▼                  ▼                   │
│  ┌─────────┐        ┌─────────┐        ┌─────────┐             │
│  │ Chain   │───────▶│ Chain   │───────▶│ Chain   │             │
│  │  Hash   │        │  Hash   │        │  Hash   │             │
│  │ [CH1]   │        │[H1+H2]  │        │[CH2+H3] │             │
│  └─────────┘        └─────────┘        └─────────┘             │
│       │                                      │                  │
│       │         조작 시도 시:                 │                  │
│       │         ┌────────────────────────┐   │                  │
│       │         │ Integrity Violation    │   │                  │
│       │         │ • HASH_MISMATCH        │   │                  │
│       │         │ • CHAIN_BREAK          │   │                  │
│       │         │ • UNAUTHORIZED_MODIFY  │   │                  │
│       │         └────────────────────────┘   │                  │
│       │                                      │                  │
│       └──────────────────────────────────────┘                  │
│                                                                 │
│  체인이 끊기면 → 즉시 탐지 → 감사 로그 생성                    │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 5.3 책임 귀속 구조

```
┌─────────────────────────────────────────────────────────────────┐
│                    Responsibility Chain                         │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  Level 1: wiiiv System                                          │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ 책임: 요청 분석, 위험 식별, 합의 도출, 판단 기록         │   │
│  │ 범위: 기술적 판단 프로세스                               │   │
│  │ 법적 책임: ❌ 없음 (AI는 법적 책임 주체 불가)            │   │
│  └─────────────────────────────────────────────────────────┘   │
│                              │                                  │
│                              ▼                                  │
│  Level 2: System Administrator                                  │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ 책임: 정책 설정, 페르소나 구성, 합의 규칙 정의           │   │
│  │ 범위: 시스템 구성 및 운영                                │   │
│  │ 법적 책임: △ 운영 책임                                   │   │
│  └─────────────────────────────────────────────────────────┘   │
│                              │                                  │
│                              ▼                                  │
│  Level 3: Organization                                          │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ 책임: 시스템 채택 결정, 정책 승인, 법적 책임             │   │
│  │ 범위: 최종 책임 귀속                                     │   │
│  │ 법적 책임: ✅ 전체 (시스템을 채택한 조직이 책임)         │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  ════════════════════════════════════════════════════════════  │
│                                                                 │
│  핵심 원칙:                                                     │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ "wiiiv는 판단을 수행하지만,                              │   │
│  │  책임 주체는 시스템을 채택하고                           │   │
│  │  정책을 설정한 조직에 귀속됩니다."                       │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 6. 운영 변경 무결성

### 6.1 정책 변경 통제

```
┌─────────────────────────────────────────────────────────────────┐
│                    Policy Change Control                        │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  정책 변경 시 필수 기록:                                        │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ PolicyDiff                                               │   │
│  │                                                          │   │
│  │ • versionBefore: "v1.0"                                  │   │
│  │ • versionAfter: "v1.1"                                   │   │
│  │ • changedKeys: ["maxDataScope", "externalSharingAllowed"]│   │
│  │ • addedKeys: ["auditRequired"]                           │   │
│  │ • removedKeys: []                                        │   │
│  │ • summary: "외부 공유 허용, 감사 요구사항 추가"          │   │
│  │ • changeReason: "비즈니스 요구사항 변경"                 │   │
│  │ • changedBy: "policy-admin"                              │   │
│  │ • approvedBy: "compliance-officer"                       │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  정책 v1.0 ────────────────▶ 정책 v1.1                         │
│       │                           │                             │
│       │    ┌──────────────┐       │                             │
│       └───▶│ PolicyDiff   │◀──────┘                             │
│            │ 기록됨       │                                     │
│            └──────────────┘                                     │
│                                                                 │
│  결정이 달라져도 OK, 단 "왜 달라졌는지" 추적 가능해야 함       │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 6.2 Override 거버넌스

```
┌─────────────────────────────────────────────────────────────────┐
│                    Override Governance                          │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  Override 요청 시 필수 조건:                                    │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ 1. Dual Control (최소 2인 승인)                          │   │
│  │                                                          │   │
│  │    Approver 1: System Admin ──────▶ ✅ Approved          │   │
│  │    Approver 2: Compliance Officer ─▶ ✅ Approved         │   │
│  │                                                          │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ 2. Time-to-Live (TTL)                                    │   │
│  │                                                          │   │
│  │    Override 유효 기간: 2시간                             │   │
│  │    만료 후 자동 무효화                                   │   │
│  │                                                          │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ 3. Scope Limitation                                      │   │
│  │                                                          │   │
│  │    • SINGLE_REQUEST: 단일 요청만                         │   │
│  │    • TIME_LIMITED: TTL 동안만                            │   │
│  │    • REQUEST_TYPE: 특정 유형만                           │   │
│  │    • FULL: 전체 (최고 승인 필요)                         │   │
│  │                                                          │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ 4. Audit Trail                                           │   │
│  │                                                          │   │
│  │    • overrideTicketId                                    │   │
│  │    • approverIds                                         │   │
│  │    • reason                                              │   │
│  │    • scope                                               │   │
│  │    • expiresAt                                           │   │
│  │                                                          │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  단일 관리자가 Override로 모든 것을 우회하는 것은 불가능       │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 6.3 복구 및 재개

```
┌─────────────────────────────────────────────────────────────────┐
│                    Recovery & Resume                            │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  Day 0 ────▶ Day 1 ────▶ Day 2 ────▶ [장애] ────▶ Day 4        │
│    │          │          │                          │           │
│    ▼          ▼          ▼                          ▼           │
│  DEC-0     DEC-1      DEC-2                      DEC-4          │
│    │          │          │                          │           │
│    └──────────┴──────────┴──────────────────────────┘           │
│                          │                                      │
│                          ▼                                      │
│              ┌────────────────────────┐                         │
│              │ Integrity Hash Chain   │                         │
│              │ (Day 3 누락 기록)      │                         │
│              └────────────────────────┘                         │
│                                                                 │
│  복구 시 확인 사항:                                             │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ ✅ 체인 무결성 검증                                      │   │
│  │ ✅ 마지막 정상 결정 식별                                 │   │
│  │ ✅ 누락된 단계 문서화                                    │   │
│  │ ✅ Config Drift 감지                                     │   │
│  │ ✅ 재개 지점 결정                                        │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  RecoveryReport:                                                │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ resumeFromRecordId: "DEC-2"                              │   │
│  │ lastKnownStateHash: "a1b2c3..."                          │   │
│  │ restoredStateHash: "a1b2c3..."                           │   │
│  │ missingSteps: ["Day 3 evaluation"]                       │   │
│  │ driftDetected: false                                     │   │
│  │ recoveryStatus: FULL_RECOVERY                            │   │
│  │ finalMode: NORMAL                                        │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 7. 검증 시나리오 요약

### 7.1 전체 검증 매트릭스

```
┌─────────────────────────────────────────────────────────────────┐
│                    Verification Matrix                          │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  시나리오 │ 검증 영역              │ 서브테스트 │ 상태         │
│  ─────────┼────────────────────────┼────────────┼──────────────│
│     1     │ 자율 의사결정          │     5      │ ✅ PASS      │
│     2     │ 자율 리서치            │     5      │ ✅ PASS      │
│     3     │ 멀티모달 판단          │     5      │ ✅ PASS      │
│     4     │ 장기 다단계 결정       │     5      │ ✅ PASS      │
│     5     │ 윤리/비즈니스 충돌     │     5      │ ✅ PASS      │
│     6     │ 다중 이해관계자        │     5      │ ✅ PASS      │
│     7     │ 감사 가능성            │     5      │ ✅ PASS      │
│     8     │ 적대적 공격 저항       │     5      │ ✅ PASS      │
│     9     │ 운영 변경 무결성       │     5      │ ✅ PASS      │
│    10     │ 프로덕션 생존성        │     5      │ ✅ PASS      │
│  ─────────┼────────────────────────┼────────────┼──────────────│
│   합계    │                        │    50      │ ALL PASS     │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 7.2 핵심 검증 결과

```
┌─────────────────────────────────────────────────────────────────┐
│                    핵심 검증 결과                               │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  1. 판단 능력 (Scenario 1-3)                                    │
│     ┌─────────────────────────────────────────────────────┐    │
│     │ ✅ 자율적으로 상황을 분석하고 판단할 수 있다        │    │
│     │ ✅ 멀티모달 입력을 처리할 수 있다                   │    │
│     │ ✅ 복잡한 조건을 종합할 수 있다                     │    │
│     └─────────────────────────────────────────────────────┘    │
│                                                                 │
│  2. 거부 능력 (Scenario 4-6)                                    │
│     ┌─────────────────────────────────────────────────────┐    │
│     │ ✅ 장기적 맥락에서 이전 판단을 번복할 수 있다       │    │
│     │ ✅ 윤리적으로 문제있는 요청을 거부할 수 있다        │    │
│     │ ✅ 이해관계 충돌을 중재할 수 있다                   │    │
│     │ ✅ 압박에도 흔들리지 않는다                         │    │
│     └─────────────────────────────────────────────────────┘    │
│                                                                 │
│  3. 감사 가능성 (Scenario 7)                                    │
│     ┌─────────────────────────────────────────────────────┐    │
│     │ ✅ 모든 판단 과정이 외부에서 이해 가능하다          │    │
│     │ ✅ 동일 조건에서 동일 결과를 재현할 수 있다         │    │
│     │ ✅ 책임 귀속이 명확하다                             │    │
│     └─────────────────────────────────────────────────────┘    │
│                                                                 │
│  4. 공격 저항 (Scenario 8)                                      │
│     ┌─────────────────────────────────────────────────────┐    │
│     │ ✅ 의도 은폐 공격을 탐지할 수 있다                  │    │
│     │ ✅ 권한 남용 시도를 무력화할 수 있다                │    │
│     │ ✅ 단계적 공격을 누적 추적할 수 있다                │    │
│     │ ✅ 책임 전가 시도를 차단할 수 있다                  │    │
│     └─────────────────────────────────────────────────────┘    │
│                                                                 │
│  5. 운영 무결성 (Scenario 9)                                    │
│     ┌─────────────────────────────────────────────────────┐    │
│     │ ✅ 정책 변경이 추적 가능하다                        │    │
│     │ ✅ 과거 결정은 수정 불가능하다                      │    │
│     │ ✅ Override는 승인 체인이 필요하다                  │    │
│     │ ✅ 설정 변경이 감지된다                             │    │
│     └─────────────────────────────────────────────────────┘    │
│                                                                 │
│  6. 생존성 (Scenario 10)                                        │
│     ┌─────────────────────────────────────────────────────┐    │
│     │ ✅ LLM 장애 시 안전하게 실패한다                    │    │
│     │ ✅ 비용 초과 시 사람에게 넘긴다                     │    │
│     │ ✅ 부분 실패 시 승인하지 않는다                     │    │
│     │ ✅ 복구 후 정확한 지점에서 재개한다                 │    │
│     └─────────────────────────────────────────────────────┘    │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 8. 결론

### 8.1 wiiiv v2.0이 증명한 것

```
┌─────────────────────────────────────────────────────────────────┐
│                                                                 │
│   wiiiv v2.0은 다음을 구조적으로 증명했습니다:                  │
│                                                                 │
│   1. LLM이 잘못된 판단을 내려도 → 거부권으로 차단된다          │
│                                                                 │
│   2. LLM이 동작하지 않아도 → 정책 기반으로 안전하게 거부한다   │
│                                                                 │
│   3. 누군가 시스템을 속이려 해도 → 다층 방어로 탐지된다        │
│                                                                 │
│   4. 사고가 발생해도 → 책임 소재가 명확하다                    │
│                                                                 │
│   5. 시스템이 변경되어도 → 모든 변경이 추적된다                │
│                                                                 │
│   6. 운영 환경이 망가져도 → 체인 무결성이 유지되고 복구된다    │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 8.2 wiiiv의 정체성

```
┌─────────────────────────────────────────────────────────────────┐
│                                                                 │
│                         wiiiv v2.0                              │
│                                                                 │
│        "LLM을 사용하지만, LLM에 지배되지 않는                   │
│         결정 무결성 중심의 운영 인프라"                         │
│                                                                 │
│   ────────────────────────────────────────────────────────────  │
│                                                                 │
│   이것은:                                                       │
│   • 마케팅 문구가 아니라 기술적 사실입니다                      │
│   • 50개의 검증 테스트가 증명합니다                             │
│   • LLM이 바뀌어도 이 구조는 유지됩니다                         │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 부록: 기술 스택

| 영역 | 기술 |
|------|------|
| Language | Kotlin |
| JDK | 17 |
| Build | Gradle (Kotlin DSL) |
| Serialization | kotlinx.serialization |
| Coroutines | kotlinx.coroutines |
| API Server | Ktor 2.3.7 (Netty) |
| API Client | Ktor Client (CIO) |
| CLI Framework | clikt 4.2.1 |
| Authentication | JWT |
| LLM Provider | OpenAI, Anthropic |

---

**wiiiv v2.0 Engineering Whitepaper**
**SKYTREE / 하늘나무**
**2026-02-01**
